{% extends "base.html" %}

{% block title %} Admin Page {% endblock%}

{% block content%}
<h1>Admin Dashboard</h1>

<!-- Metrics -->
<div class="admin-cards">
    <div class="cards">
        <ul>
            <li>Total Users: {{ total_users }}</li>
            <li>Total Orders: {{ total_orders }}</li>
            <li>Total Sales Count: {{ completed_sales_count }}</li>
            <li>Pending Orders: {{ pending_orders }}</li>
            <li>Total Sales: {{ total_sales }}</li>
        </ul>
    </div>
</div>

<!-- Users Table -->
<h2>Users</h2>
<table>
    <tr>
        <th>ID</th>
        <th>Username</th>
        <th>Email</th>
        <th>Role</th>
        <th>Actions</th>
    </tr>
    {% for user in users %}
    <tr>
        <td>{{ user.id }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.role }}</td>
        <td>
            <a href="{{ url_for('edit_user', user_id=user.id) }}">Edit</a>
            <a href="{{ url_for('delete_user', user_id=user.id) }}">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>

<!-- Orders Table -->
<h2>Recent Orders</h2>
<table>
    <tr>
        <th>Order ID</th>
        <th>User</th>
        <th>Total</th>
        <th>Status</th>
        <th>Date</th>
        <th>Actions</th>
    </tr>
    {% for order in orders %}
    <tr>
        <td>{{ order.id }}</td>
        <td>{{ order.user.username }}</td>
        <td>${{ order.total }}</td>
        <td>{{ order.status }}</td>
        <td>{{ order.date.strftime("%Y-%m-%d") }}</td>
        <td>
            <a href="{{ url_for('update_order', order_id=order.id) }}">Update</a>
        </td>
    </tr>
    {% endfor %}
</table>

{% endblock %}