{% extends "base.html" %}

{% block content %}
<!-- Orders Table -->
<h2>Recent Orders</h2>
<table>
    <tr>
        <th>Order ID</th>
        <th>User</th>
        <th>Total</th>
        <th>Status</th>
        <th>Date</th>
        <th>Actions</th>
    </tr>
    {% for order in orders %}
    <tr>
        <td>{{ order.id }}</td>
        <td>{{ order.user.username }}</td>
        <td>${{ order.total_price }}</td>
        <td>{{ order.status }}</td>
        <td>{{ order.created_at.strftime("%Y-%m-%d") }}</td>
        <td>
            {% if not order.status %}
                <form action="{{ url_for('admin_order_complete', order_id=order.id) }}" method="POST" style="display:inline;">
                    <button type="submit">✅ Complete</button>
                </form>
            {% endif %}

            <form action="{{ url_for('admin_order_delete', order_id=order.id) }}" method="POST" style="display:inline;">
                <button type="submit">❌ Delete</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}